{"remainingRequest":"F:\\bs\\travalblog\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\bs\\travalblog\\vue\\src\\views\\front\\PersonCentre.vue?vue&type=style&index=0&id=3f07dc70&lang=css","dependencies":[{"path":"F:\\bs\\travalblog\\vue\\src\\views\\front\\PersonCentre.vue","mtime":1706691639742},{"path":"F:\\bs\\travalblog\\vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\bs\\travalblog\\vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\bs\\travalblog\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\bs\\travalblog\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\bs\\travalblog\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouZWwtaGVhZGVyIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI0IzQzBEMTsNCiAgY29sb3I6ICMzMzM7DQogIHRleHQtYWxpZ246IGxlZnQ7DQogIGxpbmUtaGVpZ2h0OiA2MHB4Ow0KfQ0KDQouZWwtYXNpZGUgew0KICBtYXJnaW4tcmlnaHQ6IDEwcHg7DQogIG1hcmdpbi10b3A6IDEwcHg7DQogIGJhY2tncm91bmQtY29sb3I6ICNEM0RDRTY7DQogIGNvbG9yOiAjMzMzOw0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIGxpbmUtaGVpZ2h0OiA0NjBweDsNCn0NCg0KL2RlZXAvLmVsLWZvcm0taXRlbV9fbGFiZWwgew0KICBmb250LXdlaWdodDogYm9sZDsNCn0NCi9kZWVwLy5lbC11cGxvYWQgew0KICBib3JkZXItcmFkaXVzOiA1MCU7DQp9DQovZGVlcC8uYXZhdGFyLXVwbG9hZGVyIC5lbC11cGxvYWQgew0KICBib3JkZXI6IDFweCBkYXNoZWQgI2Q5ZDlkOTsNCiAgY3Vyc29yOiBwb2ludGVyOw0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIG92ZXJmbG93OiBoaWRkZW47DQogIGJvcmRlci1yYWRpdXM6IDUwJTsNCn0NCi9kZWVwLy5hdmF0YXItdXBsb2FkZXIgLmVsLXVwbG9hZDpob3ZlciB7DQogIC8qYm9yZGVyLWNvbG9yOiAjNDA5RUZGOyovDQogIGJvcmRlci1jb2xvcjogIzM5YzcxOTsNCn0NCi5hdmF0YXItdXBsb2FkZXItaWNvbiB7DQogIGZvbnQtc2l6ZTogMjhweDsNCiAgY29sb3I6ICM4YzkzOWQ7DQogIHdpZHRoOiAxMjBweDsNCiAgaGVpZ2h0OiAxMjBweDsNCiAgbGluZS1oZWlnaHQ6IDEyMHB4Ow0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIGJvcmRlci1yYWRpdXM6IDUwJTsNCn0NCi5hdmF0YXIgew0KICB3aWR0aDogMTIwcHg7DQogIGhlaWdodDogMTIwcHg7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBib3JkZXItcmFkaXVzOiA1MCU7DQp9DQouY2F0ZWdvcnktYnRuIHsNCiAgd2lkdGg6IGZpdC1jb250ZW50Ow0KICBwYWRkaW5nOiA1cHggMTBweDsNCiAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICBjdXJzb3I6IHBvaW50ZXI7DQp9DQouYWN0aXZlIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzM5YzcxOSAhaW1wb3J0YW50Ow0KICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsNCn0NCi5jYXJkMTEgew0KICBwYWRkaW5nOiAyMHB4Ow0KICBib3JkZXItcmFkaXVzOiA1cHg7DQogIGJveC1zaGFkb3c6IDAgMnB4IDVweCAwIHJnYmEoMCwgMCwgMCwgMC4xKTsNCiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCIuLi8uLi9hc3NldHMvaW1ncy9iZzIucG5nIik7DQogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7IC8qIOehruS/neWbvueJh+mTuua7oeaVtOS4quWFg+e0oCAqLw0KfQ0K"},{"version":3,"sources":["PersonCentre.vue"],"names":[],"mappings":";AAsPA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PersonCentre.vue","sourceRoot":"src/views/front","sourcesContent":["<template>\r\n  <div class=\"main-content\">\r\n    <div>\r\n      <img src=\"../../assets/imgs/1701853006527.png\" width=\"100%\" height=\"80px\">\r\n    </div>\r\n\r\n    <div>\r\n      <el-container>\r\n        <el-header style=\"height: 130px; display: flex; align-items: center;background-color: rgba(194,232,189,0.82)\">\r\n          <img :src=\"user.avatar\" alt=\"\" style=\"height: 80px; margin-right: 10px;border-radius: 50%\"> <!-- 添加了margin-right来调整间距 -->\r\n          <div style=\"flex: 1;margin-left: 15px\">\r\n            <div style=\"color: #666; font-size: 18px; margin-top: 15px\">{{ user.name }}</div>\r\n            <div style=\"color: #666; font-size: 18px; margin-top: -15px\" class=\"line2\">{{ user.info }}</div>\r\n            <!--            <div style=\"display: flex\">-->\r\n            <!--              <div style=\"flex: 1; text-align: center\">-->\r\n            <!--                <div style=\"margin-bottom: 5px\">文章</div>-->\r\n            <!--                <div style=\"color: #888\">{{ blog.user?.blogCount }}</div>-->\r\n            <!--              </div>-->\r\n            <!--              <div style=\"flex: 1; text-align: center\">-->\r\n            <!--                <div style=\"margin-bottom: 5px\">点赞</div>-->\r\n            <!--                <div style=\"color: #888\">{{ blog.user?.likesCount }}</div>-->\r\n            <!--              </div>-->\r\n            <!--              <div style=\"flex: 1; text-align: center\">-->\r\n            <!--                <div style=\"margin-bottom: 5px\">收藏</div>-->\r\n            <!--                <div style=\"color: #888\">{{ blog.user?.collectCount }}</div>-->\r\n            <!--              </div>-->\r\n            <!--            </div>-->\r\n          </div>\r\n          <el-button @click=\"goToPersonPage\" size=\"medium\" >编辑资料</el-button>\r\n\r\n        </el-header>\r\n      </el-container>\r\n    </div>\r\n\r\n    <el-container>\r\n      <el-aside width=\"200px\" style=\"background-color: rgba(194,232,189,0.82)\">\r\n        <el-tabs v-model=\"activeOption\" @tab-click=\"handleTabClick\" tab-position=\"left\" style=\"width: 200px; padding: 10px;\">\r\n          <!--          <el-tab-pane label=\"个人资料\" name=\"personal\"></el-tab-pane>-->\r\n          <el-tab-pane label=\"我发表的博客\" name=\"blogs\"></el-tab-pane>\r\n          <el-tab-pane label=\"我报名的活动\" name=\"activities\"></el-tab-pane>\r\n          <el-tab-pane label=\"我的点赞\" name=\"likes\"></el-tab-pane>\r\n          <el-tab-pane label=\"我的收藏\" name=\"collet\"></el-tab-pane>\r\n          <el-tab-pane label=\"我的评论\" name=\"comment\"></el-tab-pane>\r\n          <el-tab-pane label=\"我的关注\" name=\"follows\"></el-tab-pane>\r\n        </el-tabs>\r\n      </el-aside>\r\n\r\n      <div class=\"card11\" style=\"width: 100%; margin-top: 10px; \">\r\n        <el-main>\r\n          <!-- 根据激活的选项在main中展示相应内容 -->\r\n          <!--          <div v-if=\"activeOption === 'personal'\">-->\r\n          <!--            &lt;!&ndash; 显示个人资料内容 &ndash;&gt;-->\r\n          <!--            <person-page @update:user=\"updateUser\" />-->\r\n          <!--          </div>-->\r\n\r\n          <div v-if=\"activeOption === 'blogs'\">\r\n            <!-- 显示博客列表 -->\r\n            <blog-list type=\"user\" :show-opt=\"true\" />\r\n          </div>\r\n\r\n          <div v-if=\"activeOption === 'activities'\">\r\n            <!-- 显示活动列表 -->\r\n            <activity-list type=\"user\" :span=\"8\" />\r\n          </div>\r\n\r\n          <div v-if=\"activeOption === 'likes'\">\r\n            <!-- 显示点赞列表 -->\r\n            <div class=\"card\" style=\"padding: 5px; display: flex\">\r\n              <div class=\"category-btn\" :class=\"{ 'active' : likesCurrent === '博客' }\" @click=\"likesCurrent = '博客'\">博客</div>\r\n              <div class=\"category-btn\" :class=\"{ 'active' : likesCurrent === '活动' }\" @click=\"likesCurrent = '活动'\">活动</div>\r\n            </div>\r\n            <div style=\"margin-top: 10px\">\r\n              <blog-list v-if=\"likesCurrent === '博客'\" type=\"like\"></blog-list>\r\n              <activity-list v-if=\"likesCurrent === '活动'\" :span=\"8\" type=\"like\"></activity-list>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"activeOption === 'collet'\">\r\n            <!-- 显示收藏列表 -->\r\n            <div class=\"card\" style=\"padding: 5px; display: flex\">\r\n              <div class=\"category-btn\" :class=\"{ 'active' : collectCurrent === '博客' }\"  @click=\"collectCurrent = '博客'\">博客</div>\r\n              <div class=\"category-btn\" :class=\"{ 'active' : collectCurrent === '活动' }\" @click=\"collectCurrent = '活动'\">活动</div>\r\n            </div>\r\n            <div style=\"margin-top: 10px\">\r\n              <blog-list v-if=\"collectCurrent === '博客'\" type=\"collect\"></blog-list>\r\n              <activity-list v-if=\"collectCurrent === '活动'\" :span=\"8\" type=\"collect\"></activity-list>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"activeOption === 'comment'\">\r\n            <!-- 显示评论列表 -->\r\n            <div class=\"card\" style=\"padding: 5px; display: flex\">\r\n              <div class=\"category-btn\" :class=\"{ 'active' : commentCurrent === '博客' }\"  @click=\"commentCurrent = '博客'\">博客</div>\r\n              <div class=\"category-btn\" :class=\"{ 'active' : commentCurrent === '活动' }\" @click=\"commentCurrent = '活动'\">活动</div>\r\n            </div>\r\n            <div style=\"margin-top: 10px\">\r\n              <blog-list v-if=\"commentCurrent === '博客'\" type=\"comment\"></blog-list>\r\n              <activity-list v-if=\"commentCurrent === '活动'\" :span=\"8\" type=\"comment\"></activity-list>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"activeOption === 'follows'\">\r\n            <!-- 显示关注列表 -->\r\n            <FollowsList type=\"follows\"/>\r\n          </div>\r\n\r\n        </el-main>\r\n      </div>\r\n\r\n    </el-container>\r\n    <Footer/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Footer from \"@/components/Footer\";\r\nimport Comment from \"@/components/Comment\";\r\nimport PersonPage from \"@/components/PersonPage\";\r\nimport BlogList from \"@/components/BlogList\";\r\nimport ActivityList from \"@/components/ActivityList\";\r\nimport FollowsList from \"@/components/FollowsList\";\r\nimport router from '@/router'; // 路由配置在 @/router.js 文件中\r\nexport default {\r\n  name: \"PersonCentre\",\r\n  components: {\r\n    ActivityList,\r\n    BlogList,\r\n    Footer,\r\n    PersonPage,\r\n    Comment,\r\n    FollowsList,\r\n  },\r\n  data() {\r\n    const validatePassword = (rule, value, callback) => {\r\n      if (value === '') {\r\n        callback(new Error('请确认密码'))\r\n      } else if (value !== this.user.newPassword) {\r\n        callback(new Error('确认密码错误'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n\r\n\r\n    return {\r\n      activeOption: 'blogs', // 默认激活的选项\r\n      locationData: null,\r\n      blogId: this.$route.query.blogId,\r\n      blog: {},\r\n\r\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\r\n      dialogVisible: false,\r\n\r\n      rules: {\r\n        password: [\r\n          { required: true, message: '请输入原始密码', trigger: 'blur' },\r\n        ],\r\n        newPassword: [\r\n          { required: true, message: '请输入新密码', trigger: 'blur' },\r\n        ],\r\n        confirmPassword: [\r\n          { validator: validatePassword, required: true, trigger: 'blur' },\r\n        ],\r\n      },\r\n      activeName: '个人资料',\r\n      likesCurrent: '博客',\r\n      collectCurrent: '博客',\r\n      commentCurrent: '博客',\r\n    }\r\n  },\r\n  created() {\r\n    this.load()\r\n    this.$request.put('/blog/updateReadCount/' + this.blogId)\r\n  },\r\n  methods: {\r\n    goToPersonPage() {\r\n      router.push({ name: 'PersonPage' }); // 触发路由跳转\r\n    },\r\n    load() {\r\n      this.$request.get('/blog/selectById/' + this.blogId).then(res => {\r\n        this.blog = res.data || {}\r\n\r\n        this.tagsArr = JSON.parse(this.blog.tags || '[]')\r\n      })\r\n\r\n      this.$request.get('/blog/selectRecommend/' + this.blogId).then(res => {\r\n        this.recommendList = res.data || []\r\n      })\r\n    },\r\n    handleTabClick(tab) {\r\n      this.activeOption = tab.name; // 更新当前激活的选项为点击的选项的name属性值\r\n    },\r\n    updateUser() {\r\n      // 触发父级的数据更新\r\n      this.$emit('update:user')\r\n    },\r\n    // addBlog() {\r\n    //   window.open('/front/newBlog')\r\n    // },\r\n    clickTab(tab) {\r\n      console.log(tab)\r\n    },\r\n    update() {\r\n      // 保存当前的用户信息到数据库\r\n      this.$request.put('/user/update', this.user).then(res => {\r\n        if (res.code === '200') {\r\n          // 成功更新\r\n          this.$message.success('保存成功')\r\n          // 更新浏览器缓存里的用户信息\r\n          localStorage.setItem('xm-user', JSON.stringify(this.user))\r\n\r\n          // 触发父级的数据更新\r\n          this.$emit('update:user')\r\n        } else {\r\n          this.$message.error(res.msg)\r\n        }\r\n      })\r\n    },\r\n    handleAvatarSuccess(response, file, fileList) {\r\n      // 把user的头像属性换成上传的图片的链接\r\n      this.$set(this.user, 'avatar', response.data)\r\n    },\r\n    // 修改密码\r\n    updatePassword() {\r\n      this.dialogVisible = true\r\n    },\r\n    save() {\r\n      this.$refs.formRef.validate((valid) => {\r\n        if (valid) {\r\n          this.$request.put('/updatePassword', this.user).then(res => {\r\n            if (res.code === '200') {\r\n              // 成功更新\r\n              this.$message.success('修改密码成功')\r\n              this.$router.push('/login')\r\n            } else {\r\n              this.$message.error(res.msg)\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.el-header {\r\n  background-color: #B3C0D1;\r\n  color: #333;\r\n  text-align: left;\r\n  line-height: 60px;\r\n}\r\n\r\n.el-aside {\r\n  margin-right: 10px;\r\n  margin-top: 10px;\r\n  background-color: #D3DCE6;\r\n  color: #333;\r\n  text-align: center;\r\n  line-height: 460px;\r\n}\r\n\r\n/deep/.el-form-item__label {\r\n  font-weight: bold;\r\n}\r\n/deep/.el-upload {\r\n  border-radius: 50%;\r\n}\r\n/deep/.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n  border-radius: 50%;\r\n}\r\n/deep/.avatar-uploader .el-upload:hover {\r\n  /*border-color: #409EFF;*/\r\n  border-color: #39c719;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 120px;\r\n  height: 120px;\r\n  line-height: 120px;\r\n  text-align: center;\r\n  border-radius: 50%;\r\n}\r\n.avatar {\r\n  width: 120px;\r\n  height: 120px;\r\n  display: block;\r\n  border-radius: 50%;\r\n}\r\n.category-btn {\r\n  width: fit-content;\r\n  padding: 5px 10px;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n}\r\n.active {\r\n  background-color: #39c719 !important;\r\n  color: white !important;\r\n}\r\n.card11 {\r\n  padding: 20px;\r\n  border-radius: 5px;\r\n  box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.1);\r\n  background-image: url(\"../../assets/imgs/bg2.png\");\r\n  background-size: cover; /* 确保图片铺满整个元素 */\r\n}\r\n</style>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]}]}